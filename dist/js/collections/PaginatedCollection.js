(function(){var e=this,t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("collections/PaginatedCollection",["backbone","helpers","underscore"],function(e,t,r){var i,s;return i=function(e){function i(){return s=i.__super__.constructor.apply(this,arguments),s}return n(i,e),i.prototype.page=1,i.prototype.initialize=function(e){return this.o=e!=null?e:{},this.perPage=function(){return t.isMobile()?4:window.App.isDevMode?6:8}(),r.bindAll(this,"parseFun","pageInfo","nextPage"),this.options={page:this.page,perPage:this.perPage,total:50,reset:!1,remove:!1},this.o.isPaginated&&(this.fetch=this.fetchFun),this.o.isPaginated&&(this.parse=this.parseFun),i.__super__.initialize.apply(this,arguments),this},i.prototype.fetchFun=function(e){return e={remove:!1},this.loadFromFile=(e!=null?e.sectionNames:void 0)?!0:!1,Backbone.Collection.prototype.fetch.call(this,{data:$.extend(this.options,e||{})})},i.prototype.parseFun=function(e){return e.total&&(this.options.total=e.total),e.models},i.prototype.pageInfo=function(){var e,t;return e={total:this.options.total,page:this.options.page,perPage:this.options.perPage,pages:Math.ceil(this.options.total/this.options.perPage),prev:!1,next:!1},t=Math.min(this.options.total,this.options.page*this.options.perPage),this.options.total===this.options.pages*this.options.perPage&&(t=this.options.total),e.range=[(this.options.page-1)*this.options.perPage+1,t],this.options.page>1&&(e.prev=this.options.page-1),this.options.page<e.pages&&(e.next=this.options.page+1),e},i.prototype.nextPage=function(){var e=this;return this.pageInfo().next?(this.options.page++,this.fetch().then(function(){return!e.isClosed&&e.trigger("afterFetch")})):!1},i.prototype.prevPage=function(){var e=this;return this.pageInfo().prev?(this.options.page--,this.fetch().then(function(){return!e.isClosed&&e.trigger("afterFetch")})):!1},i.prototype.loadPage=function(e){var t=this;return e==null&&(e=1),e===this.options.page?!1:(this.options.page=e,this.fetch().then(function(){return!t.isClosed&&t.trigger("afterFetch")}))},i.prototype.clearSelectedIcons=function(){return App.vent.trigger("icon:deselect")},i}(e.Collection),i})}).call(this);