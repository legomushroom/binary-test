(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/RecipeView",["views/ProtoView","models/RecipeModel"],function(e,n){var r,i;return r=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.prototype.template="#recipe-template",n.prototype.className="recipe-b cf",n.prototype.events={"click .recipe-preview-e":"toggleExpand","click #js-remove":"remove","click #js-edit":"edit","click #js-cancel":"cancel","click #js-save":"save",keyup:"keyup"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.model.on("change",_.bind(this.render,this)),this},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.bindAttributes(),this},n.prototype.bindAttributes=function(){return this.$el.toggleClass("is-edit",!!this.model.get("isEditMode"))},n.prototype.toggleExpand=function(){return this.$el.toggleClass("is-expanded")},n.prototype.remove=function(e){var t=this;if(!e)return;return e.stopPropagation(),confirm('Are you sure whant to remove "'+$.trim(this.model.get("header"))+'" item?')&&this.$el.fadeOut(500,function(){return t.model.destroy().then(function(){return t.teardown()})}),this},n.prototype.edit=function(e){return this.model.toggleAttr("isEditMode"),!1},n.prototype.keyup=function(e){return this.isActive=!0,this.model.get("isEditMode")?(this.$("#js-save").toggleClass("is-inactive",!1),!1):!1},n.prototype.getFromDom=function(){return this.domData={text:this.$("#js-body").html(),header:this.$("#js-header").html(),description:this.$("#js-description").html(),author:this.$("#js-author").html(),ago:this.$("#js-ago").html(),estimatedTime:this.$("#js-estimated").html()},this.domData},n.prototype.save=function(e){var t=this;return this.isActive?(this.isActive&&this.model.set(this.getFromDom()),this.model.get("isNew")?this.model.set("isNew",!1):this.model.set("versions",this.model.get("versions")+1),this.model.save().then(function(e){return t.model.id=e.id}),this.cancel(),!1):!1},n.prototype.cancel=function(e){return this.model.get("isNew")?(this.model.destroy(),this.teardown(),!1):(this.model.set("isEditMode",!1),App.$bodyHtml.animate({scrollTop:this.$el.offset().top-150}),!1)},n.prototype.teardown=function(){return n.__super__.teardown.apply(this,arguments),this.$el.remove(),this},n}(e),r})}).call(this);